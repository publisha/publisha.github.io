<!DOCTYPE html>
<html lang="en-gb"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Video across a 2 page spread (updated)" />
<meta property="og:locale" content="en_gb" />
<meta name="description" content="There is an issue when video in a fixed layout ePub spans across 2 pages. This situation arises when you have 2 page spreads and you are converting to landscape. What happens is the video only really plays one half, even though, at first the video appears to be available full width. Updated with a javascript solution" />
<meta property="og:description" content="There is an issue when video in a fixed layout ePub spans across 2 pages. This situation arises when you have 2 page spreads and you are converting to landscape. What happens is the video only really plays one half, even though, at first the video appears to be available full width. Updated with a javascript solution" />
<link rel="canonical" href="http://localhost:4000/indesign/epub/html/2018/10/14/spread-video-fxl-epub/" />
<meta property="og:url" content="http://localhost:4000/indesign/epub/html/2018/10/14/spread-video-fxl-epub/" />
<meta property="og:site_name" content="Digital Publishing Hub" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-10-14T19:31:00+01:00" />
<script type="application/ld+json">
{"description":"There is an issue when video in a fixed layout ePub spans across 2 pages. This situation arises when you have 2 page spreads and you are converting to landscape. What happens is the video only really plays one half, even though, at first the video appears to be available full width. Updated with a javascript solution","@type":"BlogPosting","url":"http://localhost:4000/indesign/epub/html/2018/10/14/spread-video-fxl-epub/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://publisha.github.io/images/publisha_logo.jpg"}},"headline":"Video across a 2 page spread (updated)","dateModified":"2018-10-14T19:31:00+01:00","datePublished":"2018-10-14T19:31:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/indesign/epub/html/2018/10/14/spread-video-fxl-epub/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:image" content="http://localhost:4000/images/homegallery/img_00127.jpg"><!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="http://localhost:4000/indesign/epub/html/2018/10/14/spread-video-fxl-epub/">
<meta name="twitter:site" content="@pageboy">
<meta name="twitter:title" content="Video across a 2 page spread (updated)"><meta name="twitter:description" content="tutorials and screencasts about digital publishing and eBook Production"><meta name="twitter:image" content="http://localhost:4000/images/homegallery/img_00127.jpg">
<meta name="twitter:creator" content="@pageboy">
<meta name="twitter:image:alt" content="Book in the hands of a monk">
<title>
      Video across a 2 page spread (updated)
  </title>
  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/jquery.fancybox.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/guide.css">
  <link rel="stylesheet" href="/public/css/bigfoot-default.css">
  <link rel="stylesheet" href="/public/css/progressbar.css">
  <link rel="stylesheet" href="/public/css/all.css">


  <!-- Fonts -->
  <!-- can't use google fonts on GitHub unless https -->
<link href='https://fonts.googleapis.com/css?family=Cantarell:regular,italic,bold,bolditalic' rel='stylesheet'>


<!-- Optionally make the images go full width but put this in the page metadata --><!-- javascripts for fancybox -->
<script type="text/javascript" src="/public/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="/public/js/jquery.fancybox.pack.js">
</script>
<script type="text/javascript" src="/public/js/jquery.fancybox-media.js">
</script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- javascript for the footnote popups -->
<script type="text/javascript" src="/public/js/bigfoot.js"></script>
<script type="text/javascript">
    $.bigfoot();
</script></head>
<body class="theme-base-0b">
    <progress value="0" id="progressBar">
  <div class="progress-container">
    <span class="progress-bar"></span>
  </div>
</progress><!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->


<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <nav class="sidebar-nav"  style="border-bottom:none !important;">
    <a href="/"><i class="sidebar-nav-item fa fa-home fa-2x" aria-hidden="true"></i></a>
  </nav>
  <div class="sidebar-item" style="padding-top:0;padding-bottom:.5rem;">
    <p>tutorials and screencasts about digital publishing and eBook Production</p>
  </div>

  <nav class="sidebar-nav">
<ul class="navigationtoc">
<li class="header">Pages by Category</li><li class="dropdown"><a title="see all pages about InDesign" href="/sections/InDesign">InDesign <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about HTML and CSS" href="/sections/HTML and CSS">HTML and CSS <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about Typography" href="/sections/Typography">Typography <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about XML" href="/sections/XML">XML <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about ePub" href="/sections/ePub">ePub <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about iBooks Author" href="/sections/iBooks Author">iBooks Author <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li></ul>
    <ul class="navigationtoc">
      <li class="header"><b>Other Items</b></li><li><a title="screencasts from the YouTube channel" class="sidebar-nav-item" href="/screencasts/">Screencasts <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="presentations generated from Keynote" class="sidebar-nav-item" href="/presentations/">Presentations <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="Image galleries from Flickr" class="sidebar-nav-item" href="/galleries/">Images Galleries <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="eBooks" class="sidebar-nav-item" href="/eBooks/">eBooks <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="Course Sections" class="sidebar-nav-item" href="/sections/">Sections and Categories <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
      <li><a title="see all contents listed" class="sidebar-nav-item" href="/contents">List all Contents <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
      </li>
    </ul>
  </nav>
  <!-- <div class="sidebar-item">
    <p>
      <b>Note:</b> Images can be enlarged by click or touch
    </p>
  </div> -->
  <div class="sidebar-item">
    <p>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><i class="fa fa-copyright" aria-hidden="true"></i> Chris Jennings</a> | v0.85 2019 | <a href="/pages/about" title="read about this site and how it was made">About</a>
  </p>
  </div>
</div>
<!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. -->

    <div class="masthead">
      <div class="container">
        <h3 class="masthead-title">
          <a href="/" title="Home">Digital Publishing Hub</a>
          <br />
          <small>Help for publishers and students of publishing</small>
        </h3>
        <h2 class="pagetitle">Video across a 2 page spread (updated)</h2>
      </div>
    </div>

    <div class="wrap"><!-- masthead was here -->
      <div class="container content">
        <div class="post">
  <h1 class="post-title">Video across a 2 page spread (updated)</h1>
  <span class="post-date">14 Oct 2018</span>
  <p>There is an issue when video in a fixed layout ePub spans across 2 pages. This situation arises when you have 2 page spreads and you are converting to landscape. What happens is the video only really plays one half, even though, at first the video appears to be available full width. <strong>Updated with a javascript solution</strong></p>

<blockquote>
  <p>Read-on for an explanation of the problem, but then you will find a better solution at the end using javascript.</p>
</blockquote>

<h2 id="there-are-really-2-videos-one-on-each-half">There are really 2 videos (one on each half)</h2>

<p><a href="/images/2017/03/videoover2_broke.png"><img src="/images/2017/03/videoover2_broke.png" alt="In iBooks, the video is split" /></a></p>

<p>When you export to the fixed-layout ePub from InDesign – and you choose the <code class="highlighter-rouge">Convert Spread to Landscape</code> option. The process takes the pair of pages and creates one XHTML file (in the ePub package) with a viewport dimension based on the overall width of 2 pages. But, it also creates a 2 divisions with a width obtained from the width of the page. Inside these <code class="highlighter-rouge">&lt;div&gt;</code>s, it puts a copy of the video; there are 2 videos on the ePub page.</p>

<h2 id="can-we-fix">Can we fix?</h2>

<p>Yes, but only by editing the XHTML inside the ePub package!</p>

<p>Before we go ahead and show those changes you are advised to keep the spread where the video sits very simple; remove page numbers and headers and any empty text boxes that are sitting around on those pages.</p>

<blockquote>
  <p>Note: When you edit the XHTML inside the ePub package you will lose the ability to <em>round-trip</em> to InDesign, so leave these changes to the last in your workflow.</p>
</blockquote>

<h2 id="why-do-we-need-to-edit-the-xhtml">Why do we need to edit the XHTML?</h2>

<p>Blame Adobe! When the ePub is exported to fixed-layout specifying <code class="highlighter-rouge">Convert Spread to Landscape</code> a single XHTML document is created for the pair of pages, however, a <code class="highlighter-rouge">&lt;div&gt;</code> for each page is created with <em>inline styling</em> but <strong>no</strong> id or class name. <sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>.</p>

<h2 id="here-are-the-steps-then">Here are the steps then.</h2>

<ul>
  <li>The spread where you have the video needs to be simplified; that is, get rid of page numbers, headers and even empty text frames. The reason for this, is that you will be editing the XHTML, and you want to keep this simple!</li>
  <li>You will need to unpack the ePub after you have exported.</li>
  <li>You now need to find the XHTML file that contains the video.</li>
  <li>You now need to make 2 changes to this file.</li>
</ul>

<p>Look at this line:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=792,height=594"</span> <span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Take a note of the width (yours may be different to mine). Now <strong>change</strong> the width on the first <code class="highlighter-rouge">&lt;div&gt;</code>, because this will have a width that is half of the width above; You see that this is an inline CSS - this is why we cannot change in our own CSS.</p>

<p><a href="/images/2017/03/editHTML2videos.png"><img src="/images/2017/03/editHTML2videos.png" alt="This shows the HTML where the video is displayed across 2 pages" /></a></p>

<p>Here is mine:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"position:absolute;
overflow:hidden;
left:0px;
top:0px;
-webkit-transform:translate(0.00px,0.00px);
-ms-transform:translate(0.00px,0.00px);
transform:translate(0.00px,0.00px);
width:396.00px;
height:594.00px;"</span><span class="nt">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The width should be changed from <code class="highlighter-rouge">396.00px</code> to <code class="highlighter-rouge">792px</code></p>

<p>The next change is to hide the second <code class="highlighter-rouge">&lt;div&gt;</code>. Find the second block that also has a width set to half the overall viewport width and add (within the inline style):</p>

<p><code class="highlighter-rouge">display:none;</code></p>

<h2 id="autoplaying-the-video">Autoplaying the Video</h2>

<p>InDesign does provide a tick box on the media panel to play on page load. This effectively gets the video going straight away. In this situation there is a danger that using the above method to display the video fully across the spread may result in the video playing twice, and with sound this may result in an unpleasant echo.</p>

<p><a href="/images/2017/04/autoplayvideo.png"><img src="/images/2017/04/autoplayvideo.png" alt="The play on page load tick box" /></a></p>

<h3 id="how-to-solve-this">How to solve this?</h3>

<p>By simply adding <code class="highlighter-rouge">display:none;</code> we have hidden the second copy of the video, but it will still play if told to do so with ‘autoplay’.</p>

<p>We could remove the ‘autoplay’ in the HTML for the video.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;video</span> <span class="na">id=</span><span class="s">"_idVideo000"</span> <span class="na">poster=</span><span class="s">"image/80.png"</span> <span class="na">autoplay=</span><span class="s">"autoplay"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"video/msnd01.mp4"</span> <span class="na">type=</span><span class="s">"video/mp4"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/video&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>However, this is not enough, because InDesign has used javascript to start the video <sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> and you will need to disable for second video by removing this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">data</span><span class="o">-</span><span class="nx">mediaOnPageLoadActions</span><span class="o">=</span><span class="dl">"</span><span class="s2">onMediaStart(selfContainerID,0.00,0);</span><span class="dl">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>I suppose you might just as well delete all of the last &lt;div&gt; or use HTML comment tags to remove.</p>

<blockquote>
  <p>Note: Any of these changes will be reversed if you re-export from InDesign, so you should only do this at the end of your workflow or copy this code somewhere and paste back in at the end.</p>
</blockquote>

<h2 id="the-javascript-resolution">The Javascript resolution</h2>

<p>When exporting from InDesign, add the following script</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1">// run this once the page has loaded</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// find out if there is more than one video over the spread</span>
 <span class="nx">videos</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">"</span><span class="s2">video</span><span class="dl">"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">videos</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">);</span>
   <span class="nx">css</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">text/css</span><span class="dl">"</span><span class="p">;</span>
   <span class="c1">// hide the second main div of the body</span>
   <span class="c1">// make the width of the first main div the same as the viewport</span>
   <span class="nx">css</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">body &gt; div:nth-child(2) {display:none;} body &gt; div:nth-child(1) {width:732px !important;}</span><span class="dl">"</span>
   <span class="c1">// write this css to the head of the page</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">css</span><span class="p">);</span>
 <span class="p">}</span>
 <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>It may be possible to use javascript to change the markup on the page dynamically and thereby allowing us to change this even if we have made further edits in InDesign. Let me know if you find a way. <strong>Done</strong> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>The reason that there is javascript to autoplay the video rather than just using ‘autoplay’ is that Apple iOS devices do not support the HTML5 video autostart attribute. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts"><li>
        <h3>
          <a href="/publishing/editing/opensource/2018/10/14/using-booktype-to-create-a-book-in-multiple-formats/">
            Using Booktype to create a book in multiple formats
            <small>14 Oct 2018</small>
          </a>
        </h3>
      </li><li>
        <h3>
          <a href="/flickr/jquery/2018/05/27/using-flickr-to-generate-an-image-gallery/">
            Using Flickr to Generate an Image Gallery
            <small>27 May 2018</small>
          </a>
        </h3>
      </li><li>
        <h3>
          <a href="/html/css/epub/2017/08/14/reading-progress/">
            Reading Progress Indicator
            <small>14 Aug 2017</small>
          </a>
        </h3>
      </li></ul>
</div>
      </div>
    </div>
<!--<footer>
<p><a style="float:right;" rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
&#169; Chris Jennings 2019</p>
</footer>
-->
<!-- now follows items that get the menu working should it be fa-chevron-left fa-lg -->
    <label title="the menu" for="sidebar-checkbox" class="sidebar-toggle fa fa-bars fa-lg" aria-hidden="true"></label>
<!-- this next item will be shown on small screens -->
    <div class="contents"><a href="/contents" title="contents"><i class="fa fa-bars fa-lg" aria-hidden="true"></i></a>
    </div>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');
        document.addEventListener('click', function(e) {
          var target = e.target;
          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;
          checkbox.checked = false;
        }, false);
      })(document);
    </script>
    <script>
        $(document).ready(function() {
            $('.fancybox').fancybox();
        });
    </script>
    <script>
    jQuery(document).ready(function($) {
    	$("img:not([title])").each(function() {
    			if($(this).attr("alt") != '') $(this).parent().attr("title", $(this).attr("alt"))
    			else $(this).parent().attr("title", $(this).attr("src"));
    	});
    });
    </script>
    <script>
        $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').attr('class', 'sideimage').fancybox();
    </script>


    <!-- here follows a script to put the alt tag to a caption under the images -->

<script>
$(".page img").each(function() {
var imageCaption = $(this).attr("alt");
if (imageCaption != '') {
    $("<span class='caption'>" + imageCaption +
        "</span>").insertAfter(this);
}
});
</script>

    <!-- show a video -->


    <script>
    $(document).ready(function() {
    	$(".video").fancybox({
    		maxWidth	: 800,
    		maxHeight	: 600,
    		fitToView	: false,
    		width		: '70%',
    		height		: '70%',
    		autoSize	: false,
    		closeClick	: false,
    		openEffect	: 'none',
    		closeEffect	: 'none'
    	});
    });
    </script>

    <!-- navigation -->
    <script>
    jQuery(document).ready(function(){

    $(".navigation > li > a").on("click", function(e){

    	if(!$(this).hasClass("active")) {

          // hide any open menus and remove all other classes
    		$(".navigation li ul").slideUp(350);
    		$(".navigation li a").removeClass("active");

    		// open our new menu and add the open class
    		$(this).next("ul").slideDown(350);
    		$(this).addClass("active");

    	}else if($(this).hasClass("active")) {

    		$(this).removeClass("active");
    		$(this).next("ul").slideUp(350);
    	}
       e.preventDefault();
    });

    });
    </script>
<script>
    $(document).scroll(function() {
      var y = $(this).scrollTop();
      if (y > 200) {
        $('.pagetitle').fadeIn();
      } else {
        $('.pagetitle').fadeOut();
      }
    });
</script>
    <script src="/public/js/progress.js"></script>

  </body>
</html>
