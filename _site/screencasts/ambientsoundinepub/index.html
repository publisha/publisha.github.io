<!DOCTYPE html>
<html lang="en-gb"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title>
      Ambient Sound in a Fixed-Layout ePub
  </title>

  <meta name="description" content="Help for publishers and students of publishing | Tutorials and screencasts about digital publishing and eBook Production">
  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/jquery.fancybox.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/guide.css">
  <link rel="stylesheet" href="/public/css/bigfoot-default.css">
  <link rel="stylesheet" href="/public/css/progressbar.css">
  <link rel="stylesheet" href="/public/css/all.css">


  <!-- Fonts -->
  <!-- can't use google fonts on GitHub unless https -->
<link href='https://fonts.googleapis.com/css?family=Cantarell:regular,italic,bold,bolditalic' rel='stylesheet'>


<!-- Optionally make the images go full width but put this in the page metadata --><style>
.video {
  display:none;
}

@media screen and (max-width: 768px) {
  .video {
    display:block;
  }
}
</style><!-- javascripts for fancybox -->
<script type="text/javascript" src="/public/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="/public/js/jquery.fancybox.pack.js">
</script>
<script type="text/javascript" src="/public/js/jquery.fancybox-media.js">
</script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- javascript for the footnote popups -->
<script type="text/javascript" src="/public/js/bigfoot.js"></script>
<script type="text/javascript">
    $.bigfoot();
</script></head>
<body class="theme-base-0b">
    <progress value="0" id="progressBar">
  <div class="progress-container">
    <span class="progress-bar"></span>
  </div>
</progress><!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->


<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <nav class="sidebar-nav"  style="border-bottom:none !important;">
    <a href="/"><i class="sidebar-nav-item fa fa-home fa-2x" aria-hidden="true"></i></a>
  </nav>
  <div class="sidebar-item" style="padding-top:0;padding-bottom:.5rem;">
    <p>Tutorials and screencasts about digital publishing and eBook Production</p>
  </div>

  <nav class="sidebar-nav">
<ul class="navigationtoc">
<li class="header">Pages by Category</li><li class="dropdown"><a title="see all pages about InDesign" href="/sections/InDesign">InDesign <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about HTML and CSS" href="/sections/HTML and CSS">HTML and CSS <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about Typography" href="/sections/Typography">Typography <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about XML" href="/sections/XML">XML <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about ePub" href="/sections/ePub">ePub <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li><li class="dropdown"><a title="see all pages about iBooks Author" href="/sections/iBooks Author">iBooks Author <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
  </li></ul>
    <ul class="navigationtoc">
      <li class="header"><b>Other Items</b></li><li><a title="screencasts from the YouTube channel" class="sidebar-nav-item" href="/screencasts/">Screencasts <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="presentations generated from Keynote" class="sidebar-nav-item" href="/presentations/">Presentations <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <!-- <li><a title="Image galleries from Flickr" class="sidebar-nav-item" href="/galleries/">Images Galleries <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li> -->
     <li><a title="eBooks" class="sidebar-nav-item" href="/eBooks/">eBooks <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
     <li><a title="Course Sections" class="sidebar-nav-item" href="/sections/">Sections and Categories <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
     </li>
      <li><a title="see all contents listed" class="sidebar-nav-item" href="/contents">List all Contents <i style="color:white;" class="fa fa-caret-right" aria-hidden="true"></i></a>
      </li>
    </ul>
  </nav>
  <!-- <div class="sidebar-item">
    <p>
      <b>Note:</b> Images can be enlarged by click or touch
    </p>
  </div> -->
  <div class="sidebar-item">
    <p>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><i class="fa fa-copyright" aria-hidden="true"></i> Chris Jennings</a> | v0.96 2020 | <a href="/pages/about" title="read about this site and how it was made">About</a>
  </p>
  </div>
</div>
<div class="masthead">
      <div class="container">
        <h3 class="masthead-title">
          <a href="/" title="Home">Digital Publishing Hub</a>
          <br />
          <small>Help for publishers and students of publishing</small>
        </h3>
        <h2 class="pagetitle">Ambient Sound in a Fixed-Layout ePub</h2>
      </div>
    </div>

    <div class="wrap"><!-- masthead was here -->
      <div class="container content">
        <div class="post">
  <a class="video fancybox.iframe" title="" href="https://www.youtube.com/embed/tdZT2DkI8Rk?autoplay=1;rel=0&amp;showinfo=0"><i title="Show this screencast" class="fa fa-youtube-play fa-3x" aria-hidden="true"></i></a>
<h1>Ambient Sound in a Fixed-Layout ePub</h1>
<span class="post-date">05 Apr 2017</span>
<!-- <span class="post-date"></span> -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/tdZT2DkI8Rk?rel=0" frameborder="0" allowfullscreen></iframe>
  <p><strong>Just for Apple Books</strong></p>

<p>When we place audio on the page of a fixed-layout eBook, we cannot expect it to continue to play when the page is turned. Each page is a new XHTML document, so audio (or any media) will stop on leaving that page.</p>

<p>If we want to get audio to continue to play as we turn the pages, we need to modify the markup inside the ePub package after we have exported from InDesign<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>.</p>

<h3 id="further-details">Further Details</h3>

<p>Books on Apple devices supports this ambient sound feature and we need to add a reference to the iBooks extensions in the HTML tag at the top of the pages that need this audio. We also need to modify the audio tag inside the HTML markup.</p>

<p>We can use InDesign to add the audio file (we can do this on the master pages), but there are some very specific issues to be aware of:</p>

<p>Each HTML page will have the HTML tag thus:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span> <span class="na">xmlns:epub=</span><span class="s">"http://www.idpf.org/2007/ops"</span><span class="nt">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>we need this instead:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span> <span class="na">xmlns:epub=</span><span class="s">"http://www.idpf.org/2007/ops"</span> <span class="na">epub:prefix=</span><span class="s">"ibooks: http://vocabulary.itunes.apple.com/rdf/ibooks/vocabulary-extensions-1.0/"</span><span class="nt">&gt;</span>;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When we place audio on an InDesign page it will create HTML for audio like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;audio</span> <span class="na">id=</span><span class="s">"_idAudio000"</span> <span class="na">controls=</span><span class="s">"controls"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"audio/dreamambient.mp3"</span> <span class="na">type=</span><span class="s">"audio/mpeg"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/audio&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This is perfectly valid but we need this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;audio</span> <span class="na">epub:type=</span><span class="s">"ibooks:soundtrack"</span> <span class="na">src=</span><span class="s">"audio/dreamambient.mp3"</span><span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You will want to hide the audio somewhere on the InDesign page, by putting it behind an image.</p>

<p>I do hope the screencast explains this.</p>

<blockquote>
  <p><strong>Note</strong>: iBooks on the MAC has a few anomolies; the soundtrack switch does not always display and the audio icon in the menu bar shows even if there id no audio on that page.</p>
</blockquote>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Always remember that once we edit the HTML inside the book package then we lose the ability to go back to InDesign for further edits <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
<p class="prevnext"><a title="Previous Screencast" href="/screencasts/Indesign2iBooksAuthor2/" class="prev"><i class="fa fa-chevron-left fa-2x" aria-hidden="true"></i></a><a title="Next Screencast" href="/screencasts/id2iba_recipeBook/" class="nxt"><i class="fa fa-chevron-right fa-2x" aria-hidden="true"></i></a></p><p><a href="/screencasts/"><i class="fa fa-chevron-left" aria-hidden="true"></i> See all Screencasts</a></p>
</div>

      </div>
    </div>
    <label title="the menu" for="sidebar-checkbox" class="sidebar-toggle fa fa-bars fa-lg" aria-hidden="true"></label>
<!-- this next item will be shown on small screens -->
    <div class="contents"><a href="/contents" title="contents"><i class="fa fa-bars fa-lg" aria-hidden="true"></i></a>
    </div>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');
        document.addEventListener('click', function(e) {
          var target = e.target;
          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;
          checkbox.checked = false;
        }, false);
      })(document);
    </script>
    <script>
        $(document).ready(function() {
            $('.fancybox').fancybox();
        });
    </script>
    <script>
    jQuery(document).ready(function($) {
    	$("img:not([title])").each(function() {
    			if($(this).attr("alt") != '') $(this).parent().attr("title", $(this).attr("alt"))
    			else $(this).parent().attr("title", $(this).attr("src"));
    	});
    });
    </script>
    <script>
        $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').attr('class', 'sideimage').fancybox();
    </script>


    <!-- here follows a script to put the alt tag to a caption under the images -->

<script>
$(".page img").each(function() {
var imageCaption = $(this).attr("alt");
if (imageCaption != '') {
    $("<span class='caption'>" + imageCaption +
        "</span>").insertAfter(this);
}
});
</script>

    <!-- show a video -->


    <script>
    $(document).ready(function() {
    	$(".video").fancybox({
    		maxWidth	: 800,
    		maxHeight	: 600,
    		fitToView	: false,
    		width		: '70%',
    		height		: '70%',
    		autoSize	: false,
    		closeClick	: false,
    		openEffect	: 'none',
    		closeEffect	: 'none'
    	});
    });
    </script>

    <!-- navigation -->
    <script>
    jQuery(document).ready(function(){

    $(".navigation > li > a").on("click", function(e){

    	if(!$(this).hasClass("active")) {

          // hide any open menus and remove all other classes
    		$(".navigation li ul").slideUp(350);
    		$(".navigation li a").removeClass("active");

    		// open our new menu and add the open class
    		$(this).next("ul").slideDown(350);
    		$(this).addClass("active");

    	}else if($(this).hasClass("active")) {

    		$(this).removeClass("active");
    		$(this).next("ul").slideUp(350);
    	}
       e.preventDefault();
    });

    });
    </script><script>
    $(document).scroll(function() {
      var y = $(this).scrollTop();
      if (y > 200) {
        $('.pagetitle').fadeIn();
      } else {
        $('.pagetitle').fadeOut();
      }
    });
</script><script src="/public/js/progress.js"></script>


<script>
jQuery(document).ready(function($) {
	$('a')
		.filter('[href^="http"], [href^="//"]')
		.not('[href*="' + window.location.host + '"]')
		.attr('rel', 'noopener noreferrer')
		.attr('target', '_blank');
});
</script>
  </body>
</html>
